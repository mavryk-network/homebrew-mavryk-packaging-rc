#!/usr/bin/env bash

# SPDX-FileCopyrightText: 2022 Oxhead Alpha
# SPDX-License-Identifier: LicenseRef-MIT-OA

set -euo pipefail

tezos_client="/usr/bin/octez-client"

config="$TEZOS_CLIENT_DIR/config"

mkdir -p "$TEZOS_CLIENT_DIR"

"$tezos_client" --base-dir "$TEZOS_CLIENT_DIR" \
                --endpoint "$NODE_RPC_SCHEME://$NODE_RPC_ADDR" \
                config "$([[ -f $config ]] && echo "update" || echo "init")"
